/**
 * skylark-langx-emitter - The skylark JavaScript language extension library.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["skylark-langx-ns/ns","skylark-langx-types","skylark-langx-objects","skylark-langx-arrays","skylark-langx-klass"],function(n,t,i,s,e){var r=Array.prototype.slice,a=s.compact,l=t.isDefined,o=t.isPlainObject,h=t.isFunction,u=t.isString,f=t.isEmptyObject,c=i.mixin;function v(n){var t=(""+n).split(".");return{name:t[0],ns:t.slice(1).join(" ")}}var g=e({on:function(n,t,i,s,e,r){var a=this,l=this._hub||(this._hub={});return o(n)?(e=s,each(n,function(n,s){a.on(n,t,i,s,e,r)}),this):(u(t)||h(s)||(e=s,s=i,i=t,t=void 0),h(i)&&(e=s,s=i,i=null),u(n)&&(n=n.split(/\s/)),n.forEach(function(n){var a=v(n),o=a.name,h=a.ns;(l[o]||(l[o]=[])).push({fn:s,selector:t,data:i,ctx:e,ns:h,one:r})}),this)},one:function(n,t,i,s,e){return this.on(n,t,i,s,e,1)},trigger:function(n){if(!this._hub)return this;var t=this;u(n)&&(n=new CustomEvent(n)),Object.defineProperty(n,"target",{value:this});var i=r.call(arguments,1);return i=l(i)?[n].concat(i):[n],[n.type||n.name,"all"].forEach(function(s){var e=v(s),r=e.name,l=e.ns,o=t._hub[r];if(o){for(var h=o.length,u=!1,f=0;f<h;f++){var g=o[f];(!l||g.ns&&g.ns.startsWith(l))&&(n.data?g.data&&(n.data=c({},g.data,n.data)):n.data=g.data||null,g.fn.apply(g.ctx,i),g.one&&(o[f]=null,u=!0))}u&&(t._hub[s]=a(o))}}),this},listened:function(n){return((this._hub||(this._events={}))[n]||[]).length>0},listenTo:function(n,t,i,s){if(!n)return this;u(i)&&(i=this[i]),s?n.one(t,i,this):n.on(t,i,this);for(var e,r=this._listeningTo||(this._listeningTo=[]),a=0;a<r.length;a++)if(r[a].obj==n){e=r[a];break}e||r.push(e={obj:n,events:{}});var l=e.events,o=l[t]=l[t]||[];return-1==o.indexOf(i)&&o.push(i),this},listenToOnce:function(n,t,i){return this.listenTo(n,t,i,1)},off:function(n,t){var i=this._hub||(this._hub={});return u(n)&&(n=n.split(/\s/)),n.forEach(function(n){var s=v(n),e=s.name,r=s.ns,a=i[e];if(a){var l=[];if(t||r)for(var o=0,h=a.length;o<h;o++)t&&a[o].fn!==t&&a[o].fn._!==t?l.push(a[o]):!r||a[o].ns&&0==a[o].ns.indexOf(r)||l.push(a[o]);l.length?i[e]=l:delete i[e]}}),this},unlistenTo:function(n,t,i){var s=this._listeningTo;if(!s)return this;for(var e=0;e<s.length;e++){var r=s[e];if(!n||n==r.obj){var l=r.events;for(var o in l)if(!t||t==o){for(var h=l[o],u=0;u<h.length;u++)i&&i!=h[e]||(r.obj.off(o,h[e],this),h[e]=null);h=l[o]=a(h),f(h)&&(l[o]=null)}f(l)&&(s[e]=null)}}return s=this._listeningTo=a(s),f(s)&&(this._listeningTo=null),this}});return n.attach("langx.Evented",g)});
//# sourceMappingURL=sourcemaps/Evented.js.map
